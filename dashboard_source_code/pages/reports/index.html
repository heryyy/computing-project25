<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports & Analytics - Surveillance Dashboard</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="../../index.html" class="sidebar-logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>SecureView</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="../../index.html" class="nav-link">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../monitoring/index.html" class="nav-link">
                        <i class="fas fa-video"></i>
                        <span>Live Monitoring</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../alerts/index.html" class="nav-link">
                        <i class="fas fa-bell"></i>
                        <span>Alerts & Notifications</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../playback/index.html" class="nav-link">
                        <i class="fas fa-play-circle"></i>
                        <span>Video Playback</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../reports/index.html" class="nav-link active">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reports & Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../cameras/index.html" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>Camera Management</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../users/index.html" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>User Management</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="toggle-sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2>Reports & Analytics</h2>
                </div>
                <div class="header-right">
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="user-profile">
                        <div class="avatar">
                            <span>JD</span>
                        </div>
                        <span>John Doe</span>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <!-- Report Filters -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Report Filters</h2>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
                            <div style="flex: 1; min-width: 200px;">
                                <label for="report-type" class="form-label">Report Type</label>
                                <select id="report-type" class="form-control">
                                    <option value="security">Security Incidents</option>
                                    <option value="attendance">Attendance</option>
                                    <option value="traffic">Traffic Analysis</option>
                                    <option value="system">System Performance</option>
                                </select>
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <label for="location-filter" class="form-label">Location</label>
                                <select id="location-filter" class="form-control">
                                    <option value="all">All Locations</option>
                                    <option value="front-gate">Front Gate</option>
                                    <option value="lobby">Lobby</option>
                                    <option value="parking">Parking Lot</option>
                                    <option value="warehouse">Warehouse</option>
                                </select>
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <label for="date-range" class="form-label">Date Range</label>
                                <select id="date-range" class="form-control">
                                    <option value="today">Today</option>
                                    <option value="yesterday">Yesterday</option>
                                    <option value="week" selected>Last 7 Days</option>
                                    <option value="month">Last 30 Days</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            <div style="flex: 1; min-width: 200px; display: flex; align-items: flex-end;">
                                <button class="btn btn-primary" style="margin-right: 0.5rem;">
                                    <i class="fas fa-sync"></i> Generate Report
                                </button>
                                <button class="btn btn-outline">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Incidents Overview -->
                <div class="grid">
                    <!-- Incidents by Type -->
                    <div class="col-span-8">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Security Incidents by Type</h2>
                                <div class="card-actions">
                                    <button class="btn btn-outline">Daily</button>
                                    <button class="btn btn-primary">Weekly</button>
                                    <button class="btn btn-outline">Monthly</button>
                                </div>
                            </div>
                            <div class="card-body" style="height: 300px;">
                                <canvas id="incidents-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Incidents by Location -->
                    <div class="col-span-4">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Incidents by Location</h2>
                            </div>
                            <div class="card-body" style="height: 300px;">
                                <canvas id="location-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance Report -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Attendance Report</h2>
                        <div class="card-actions">
                            <button class="btn btn-outline">
                                <i class="fas fa-download"></i> Export CSV
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-file-pdf"></i> Export PDF
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border-color);">
                                    <th style="text-align: left; padding: 0.75rem;">Name</th>
                                    <th style="text-align: left; padding: 0.75rem;">ID</th>
                                    <th style="text-align: left; padding: 0.75rem;">Department</th>
                                    <th style="text-align: left; padding: 0.75rem;">Check-In</th>
                                    <th style="text-align: left; padding: 0.75rem;">Check-Out</th>
                                    <th style="text-align: left; padding: 0.75rem;">Duration</th>
                                    <th style="text-align: left; padding: 0.75rem;">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border-color);">
                                    <td style="padding: 0.75rem;">John Smith</td>
                                    <td style="padding: 0.75rem;">EMP001</td>
                                    <td style="padding: 0.75rem;">Engineering</td>
                                    <td style="padding: 0.75rem;">08:55 AM</td>
                                    <td style="padding: 0.75rem;">05:05 PM</td>
                                    <td style="padding: 0.75rem;">8h 10m</td>
                                    <td style="padding: 0.75rem;"><span style="color: var(--secondary-color);">Present</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-color);">
                                    <td style="padding: 0.75rem;">Sarah Johnson</td>
                                    <td style="padding: 0.75rem;">EMP002</td>
                                    <td style="padding: 0.75rem;">Marketing</td>
                                    <td style="padding: 0.75rem;">09:10 AM</td>
                                    <td style="padding: 0.75rem;">06:20 PM</td>
                                    <td style="padding: 0.75rem;">9h 10m</td>
                                    <td style="padding: 0.75rem;"><span style="color: var(--secondary-color);">Present</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-color);">
                                    <td style="padding: 0.75rem;">Michael Brown</td>
                                    <td style="padding: 0.75rem;">EMP003</td>
                                    <td style="padding: 0.75rem;">Sales</td>
                                    <td style="padding: 0.75rem;">08:45 AM</td>
                                    <td style="padding: 0.75rem;">04:50 PM</td>
                                    <td style="padding: 0.75rem;">8h 05m</td>
                                    <td style="padding: 0.75rem;"><span style="color: var(--secondary-color);">Present</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-color);">
                                    <td style="padding: 0.75rem;">Emily Davis</td>
                                    <td style="padding: 0.75rem;">EMP004</td>
                                    <td style="padding: 0.75rem;">HR</td>
                                    <td style="padding: 0.75rem;">--</td>
                                    <td style="padding: 0.75rem;">--</td>
                                    <td style="padding: 0.75rem;">--</td>
                                    <td style="padding: 0.75rem;"><span style="color: var(--danger-color);">Absent</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem;">David Wilson</td>
                                    <td style="padding: 0.75rem;">EMP005</td>
                                    <td style="padding: 0.75rem;">IT</td>
                                    <td style="padding: 0.75rem;">09:30 AM</td>
                                    <td style="padding: 0.75rem;">--</td>
                                    <td style="padding: 0.75rem;">--</td>
                                    <td style="padding: 0.75rem;"><span style="color: var(--info-color);">Present (In)</span></td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <!-- Pagination -->
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                            <div>
                                Showing 1-5 of 125 employees
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-outline" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-primary">1</button>
                                <button class="btn btn-outline">2</button>
                                <button class="btn btn-outline">3</button>
                                <button class="btn btn-outline">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Heatmap Analysis -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Activity Heatmap</h2>
                        <div class="card-actions">
                            <select class="form-control">
                                <option value="motion">Motion Density</option>
                                <option value="crowd">Crowd Density</option>
                                <option value="unusual">Unusual Behavior</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 300px;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem;">Front Gate</div>
                                <div style="position: relative; aspect-ratio: 16/9; background-color: #000; margin-bottom: 1rem;">
                                    <img src="https://via.placeholder.com/640x360?text=Heatmap+1" alt="Heatmap" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">
                                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(255,0,0,0.5) 0%, rgba(0,0,0,0) 70%);"></div>
                                </div>
                            </div>
                            <div style="flex: 1; min-width: 300px;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem;">Lobby</div>
                                <div style="position: relative; aspect-ratio: 16/9; background-color: #000; margin-bottom: 1rem;">
                                    <img src="https://via.placeholder.com/640x360?text=Heatmap+2" alt="Heatmap" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">
                                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at center, rgba(255,0,0,0.7) 0%, rgba(0,0,0,0) 70%);"></div>
                                </div>
                            </div>
                            <div style="flex: 1; min-width: 300px;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem;">Parking Lot</div>
                                <div style="position: relative; aspect-ratio: 16/9; background-color: #000; margin-bottom: 1rem;">
                                    <img src="https://via.placeholder.com/640x360?text=Heatmap+3" alt="Heatmap" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">
                                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, rgba(255,0,0,0.6) 0%, rgba(0,0,0,0) 100%);"></div>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: center; margin-top: 1rem;">
                            <div style="display: flex; align-items: center; width: 300px;">
                                <span style="font-size: 0.875rem;">Low</span>
                                <div style="flex: 1; height: 10px; margin: 0 0.5rem; background: linear-gradient(to right, rgba(0,255,0,0.5), rgba(255,255,0,0.5), rgba(255,0,0,0.5));"></div>
                                <span style="font-size: 0.875rem;">High</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="../../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Incidents by Type Chart
            const incidentsChart = document.getElementById('incidents-chart');
            if (incidentsChart) {
                new Chart(incidentsChart, {
                    type: 'bar',
                    data: {
                        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                        datasets: [{
                            label: 'Motion Detection',
                            data: [65, 59, 80, 81, 56, 40, 30],
                            backgroundColor: 'rgba(63, 131, 248, 0.7)',
                        }, {
                            label: 'Face Recognition',
                            data: [28, 48, 40, 19, 36, 27, 20],
                            backgroundColor: 'rgba(26, 86, 219, 0.7)',
                        }, {
                            label: 'Intrusion Alerts',
                            data: [10, 15, 8, 12, 5, 3, 2],
                            backgroundColor: 'rgba(224, 36, 36, 0.7)',
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Security Incidents - Last 7 Days'
                            }
                        },
                        scales: {
                            x: {
                                stacked: true,
                            },
                            y: {
                                stacked: true,
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // Incidents by Location Chart
            const locationChart = document.getElementById('location-chart');
            if (locationChart) {
                new Chart(locationChart, {
                    type: 'pie',
                    data: {
                        labels: ['Front Gate', 'Lobby', 'Parking Lot', 'Warehouse', 'Other'],
                        datasets: [{
                            data: [35, 25, 20, 15, 5],
                            backgroundColor: [
                                'rgba(26, 86, 219, 0.7)',
                                'rgba(63, 131, 248, 0.7)',
                                'rgba(14, 159, 110, 0.7)',
                                'rgba(224, 36, 36, 0.7)',
                                'rgba(107, 114, 128, 0.7)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            title: {
                                display: true,
                                text: 'Incidents by Location'
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
